@{
 var rol = ViewBag.Rol as SistemaEscolar.Models.Rol;
 var permisos = ViewBag.Permisos as List<SistemaEscolar.Models.Permiso> ?? new();
 var asignados = ViewBag.Asignados as List<int> ?? new();
 Layout = "/Views/Shared/_Layout.cshtml";
}
<h3>Editar permisos para rol: @rol?.Nombre</h3>
<form method="post" action="/Seguridad/RolPermisos/@rol.Id">
 @Html.AntiForgeryToken()
 <div class="mb-3">
 @foreach(var p in permisos){ <div class="form-check"><input class="form-check-input" type="checkbox" name="permisoIds" value="@p.Id" id="p@p.Id" @(asignados.Contains(p.Id) ? "checked" : "") /><label class="form-check-label" for="p@p.Id">@p.Codigo - @p.Descripcion</label></div> }
 </div>
 <button class="btn btn-primary" type="submit">Guardar</button>
</form>